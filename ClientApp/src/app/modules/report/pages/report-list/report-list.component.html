<section >
    <p-table
      selectionMode="single"
      [(selection)]="selectedReport"
      (selectionChange)="reportService.selectedReport.next(selectedReport)"
      [value]="(reportService.dataReport | async)!"
      [scrollable]="true"
      scrollHeight="400px" 
      dataKey="id">
        <ng-template pTemplate="header">
            <tr>
                <th style="width: 5rem;"></th>
                <th>Стенд</th>
                <th>№ испытания</th>
                <th>Дата проведения</th>
                <th>Инициатор</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-report let-expanded="expanded" >
            <tr [pSelectableRow]="report">
                <td>
                    <button type="button" pButton pRipple [pRowToggler]="report"
                            class="p-button-text p-button-rounded p-button-plain"
                            [icon]="expanded?'pi pi-chevron-down':'pi pi-chevron-right'"></button>
                </td>
                <td>{{report.name}}</td>
                <td>{{report.number}}</td>
                <td>{{report.date | date: "dd.MM.yyyy"}}</td>
                <td>{{report.user.second_name}} {{report.user.first_name|slice:0:1}}.{{report.user.last_name|slice:0:1}}.</td>
                <!-- добавить выпадающее окно со значениями испытания вместе с графиками и кнопкой выгрузить в эксель -->
                <!-- и добавления значений -->
            </tr>
        </ng-template>
        <ng-template pTemplate="rowexpansion" let-report>
            <tr>
                <td>
                <p-table [value]="report.report">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>№</th>
                            <th>x</th>
                            <th>y</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-report>
                        <tr>
                            <td>{{report.series}}</td>
                            <td>{{report.x}}</td>
                            <td>{{report.y}}</td>
                        </tr>
                    </ng-template>
                </p-table>
               </td>
               <td>
                <p-table [value]="report.values">
                    <ng-template pTemplate="header">
                        <tr>
                            <th>Наименование</th>
                            <th>Описание</th>
                            <th>Значение</th>
                            <th>Вывод</th>
                        </tr>
                    </ng-template>
                    <ng-template pTemplate="body" let-values>
                        <tr>
                            <td>{{values.name}}</td>
                            <td>{{values.description}}</td>
                            <td>{{values.value}}</td>
                            <td>{{values.conclusion}}</td>
                        </tr>
                    </ng-template>
                </p-table>
                </td>
            </tr>
                
        </ng-template>
    </p-table>
  </section>